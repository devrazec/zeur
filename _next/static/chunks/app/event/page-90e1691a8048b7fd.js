(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[53],{232:(e,l,o)=>{"use strict";o.r(l),o.d(l,{default:()=>g});var a=o(5155),t=o(2115),r=o(9603),n=o(4340),i=o(834),s=o(3303),d=o(5132),c=o(5971),p=o(7381),u=o(862);let g=t.memo(()=>{var e,l,o,g;let{eventCategory:x,setEventCategory:m,eventLocation:h,setEventLocation:f,eventPriority:b,setEventPriority:j,eventDescription:C,setEventDescription:v,category:y,location:w,priority:T,geoEventPinLocation:L,geoEventAddressLocation:k}=(0,t.useContext)(r.F),[F,I]=(0,t.useState)(0);return(0,a.jsxs)("div",{className:"flex flex-col h-screen p-4 gap-4",children:[(0,a.jsx)(c.r,{model:[{label:"Mapa",icon:"pi pi-map"},{label:"Evento",icon:"pi pi-pencil"},{label:"Imagens",icon:"pi pi-image"}],activeIndex:F,onTabChange:e=>I(e.index)}),(0,a.jsxs)("div",{className:"flex flex-col flex-1 gap-4 overflow-auto",children:[0===F&&(0,a.jsxs)("div",{className:"flex flex-col gap-3 p-4 border border-gray-300 rounded min-h-[300px]",children:[(0,a.jsxs)(p.V,{children:[(0,a.jsx)(n.S,{id:"endereco",value:k,disabled:!0,placeholder:"Endere\xe7o"}),(0,a.jsx)("label",{htmlFor:"endereco",children:"Endere\xe7o"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(p.V,{children:[(0,a.jsx)(n.S,{id:"latitude",value:null!=(o=null==L||null==(e=L.lat)?void 0:e.toFixed(4))?o:"—",disabled:!0,placeholder:"Latitude"}),(0,a.jsx)("label",{htmlFor:"latitude",children:"Latitude"})]}),(0,a.jsxs)(p.V,{children:[(0,a.jsx)(n.S,{id:"longitude",value:null!=(g=null==L||null==(l=L.lng)?void 0:l.toFixed(4))?g:"—",disabled:!0,placeholder:"Longitude"}),(0,a.jsx)("label",{htmlFor:"longitude",children:"Longitude"})]})]}),(0,a.jsx)("div",{className:"flex-1 min-h-[300px]",children:(0,a.jsx)(u.A,{className:"w-full h-full"})})]}),1===F&&(0,a.jsxs)("div",{className:"flex flex-col gap-3 p-4 border border-gray-300 rounded",children:[(0,a.jsxs)(p.V,{children:[(0,a.jsx)(i.m,{inputId:"categoria",value:x,onChange:e=>m(e.value),options:y,optionLabel:"label",showClear:!0,appendTo:()=>document.body,placeholder:"Categoria"}),(0,a.jsx)("label",{htmlFor:"categoria",children:"Categoria"})]}),(0,a.jsxs)(p.V,{children:[(0,a.jsx)(i.m,{inputId:"localizacao",value:h,onChange:e=>f(e.value),options:w,optionLabel:"label",showClear:!0,filter:!0,appendTo:()=>document.body,placeholder:"Localiza\xe7\xe3o"}),(0,a.jsx)("label",{htmlFor:"localizacao",children:"Localiza\xe7\xe3o"})]}),(0,a.jsxs)(p.V,{children:[(0,a.jsx)(i.m,{inputId:"prioridade",value:b,onChange:e=>j(e.value),options:T,optionLabel:"label",showClear:!0,appendTo:()=>document.body,placeholder:"Prioridade"}),(0,a.jsx)("label",{htmlFor:"prioridade",children:"Prioridade"})]}),(0,a.jsxs)(p.V,{children:[(0,a.jsx)(s.Z,{id:"descricao",autoResize:!0,value:C,onChange:e=>v(e.target.value),rows:4,placeholder:"Descri\xe7\xe3o"}),(0,a.jsx)("label",{htmlFor:"descricao",children:"Descri\xe7\xe3o"})]})]}),2===F&&(0,a.jsx)("div",{className:"flex flex-col min-h-[300px] p-4 border border-gray-300 rounded",children:(0,a.jsx)(d.e,{name:"images[]",url:"/api/upload",multiple:!0,accept:"image/*",chooseLabel:"Imagens",uploadLabel:"Upload",cancelLabel:"Cancelar",maxFileSize:1e6,className:"w-full",emptyTemplate:(0,a.jsx)("p",{className:"m-0",children:"Arraste imagens aqui"})})})]})]})})},862:(e,l,o)=>{"use strict";o.d(l,{A:()=>c});var a=o(5155),t=o(2115),r=o(9603),n=o(7911);let i=()=>{let e=(0,n.ko)(),{geoMetropolitana:l}=(0,t.useContext)(r.F);return(0,t.useEffect)(()=>{if(!e)return;let o=l.features[0].geometry,a=[];if("Polygon"===o.type){let e=o.coordinates[0].map(e=>{let[l,o]=e;return{lat:o,lng:l}});a.push(e)}else"MultiPolygon"===o.type&&o.coordinates.forEach(e=>{let l=e[0].map(e=>{let[l,o]=e;return{lat:o,lng:l}});a.push(l)});let t=new google.maps.Polygon({paths:a,strokeColor:"#057642",strokeWeight:2,fillColor:"#057642",fillOpacity:.2,map:e});return()=>t.setMap(null)},[e]),null},s=e=>{let{mapZoom:l,updateAddress:o}=e,a=(0,n.ko)(),{setGeoEvenMyLocation:i,setGeoEvenPinLocation:s}=(0,t.useContext)(r.F);return(0,t.useEffect)(()=>{if(!a)return;let e=document.createElement("div");return e.innerHTML='<i class="pi pi-map-marker"></i>',Object.assign(e.style,{display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",background:"#fff",border:"2px solid #fff",boxShadow:"0 2px 6px rgba(0,0,0,0.3)",cursor:"pointer",margin:"10px",padding:"9px 9.5px",fontFamily:"Roboto, Arial, sans-serif"}),e.onclick=()=>{if(!navigator.geolocation)return alert("Geolocation not supported.");navigator.geolocation.getCurrentPosition(e=>{let{latitude:t,longitude:r}=e.coords,n={lat:t,lng:r};i(n),s(n),o(t,r),a.panTo(n),a.setZoom(l)})},a.controls[google.maps.ControlPosition.RIGHT_TOP].push(e),()=>{let l=a.controls[google.maps.ControlPosition.RIGHT_TOP],o=l.getArray().indexOf(e);o>=0&&l.removeAt(o)}},[a]),null},d=e=>{let{initialView:l,zoomView:o,updateAddress:a}=e,i=(0,n.ko)(),{setGeoEvenPinLocation:s}=(0,t.useContext)(r.F);return(0,t.useEffect)(()=>{if(!i)return;let e=document.createElement("div");return e.innerHTML='<i class="pi pi-refresh"></i>',Object.assign(e.style,{display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",background:"#fff",color:"#000",border:"2px solid #fff",boxShadow:"0 2px 6px rgba(0,0,0,0.3)",cursor:"pointer",margin:"10px",padding:"9px 9.5px",fontFamily:"Roboto, Arial, sans-serif"}),e.onclick=()=>{i.panTo(l),i.setZoom(o),s(l),a(l.lat,l.lng)},i.controls[google.maps.ControlPosition.TOP_RIGHT].push(e),()=>{let l=i.controls[google.maps.ControlPosition.TOP_RIGHT],o=l.getArray().indexOf(e);o>=0&&l.removeAt(o)}},[i]),null},c=()=>{let{geoEventPinLocation:e,setGeoEvenPinLocation:l,geoEventInitialView:o,geoEventZoomView:c,setGeoEventAddressLocation:p,geoEventMyLocation:u,setGeoEvenMyLocation:g}=(0,t.useContext)(r.F),[x,m]=(0,t.useState)(""),h=(e,l)=>{if(!window.google||!window.google.maps||!window.google.maps.Geocoder)return void setTimeout(()=>h(e,l),100);new window.google.maps.Geocoder().geocode({location:{lat:e,lng:l}},(e,l)=>{"OK"===l&&e[0]?(p(e[0].formatted_address),m(e[0].formatted_address)):(p(null),m(""))})};return(0,t.useEffect)(()=>{e&&h(e.lat,e.lng)},[e]),(0,a.jsx)(n.c4,{apiKey:"AIzaSyAb70y0_HMW1Zp07hmz05DMhVW3LhP7gAI",libraries:["drawing"],children:(0,a.jsxs)(n.T5,{style:{width:"100%",height:"80vh"},defaultCenter:o,defaultZoom:c,gestureHandling:"greedy",mapId:"abcd1234efgh5678",options:{zoomControl:!0,streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!0,scaleControl:!1,rotateControl:!1,keyboardShortcuts:!1,clickableIcons:!1,scrollwheel:!0,cameraControl:!1},onClick:e=>{let o=e.latLng.lat(),a=e.latLng.lng();l({lat:o,lng:a}),g({lat:o,lng:a}),h(o,a)},children:[(0,a.jsx)(i,{}),e&&(0,a.jsx)(n.J8,{position:e,draggable:!0,title:x,onDragEnd:e=>{let o=e.latLng.lat(),a=e.latLng.lng();l({lat:o,lng:a}),g({lat:o,lng:a}),h(o,a)}}),(0,a.jsx)(s,{mapZoom:c,updateAddress:h}),(0,a.jsx)(d,{initialView:o,zoomView:c,updateAddress:h})]})})}},3188:(e,l,o)=>{Promise.resolve().then(o.bind(o,232))}},e=>{e.O(0,[31,911,147,502,603,441,255,358],()=>e(e.s=3188)),_N_E=e.O()}]);