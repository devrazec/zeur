(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[53],{862:(e,n,t)=>{"use strict";t.d(n,{A:()=>u});var r=t(5155),a=t(2115),l=t(9603),o=t(7911);let i=()=>{let e=(0,o.ko)(),{geoMetropolitana:n}=(0,a.useContext)(l.F);return(0,a.useEffect)(()=>{if(!e)return;let t=n.features[0].geometry,r=[];if("Polygon"===t.type){let e=t.coordinates[0].map(e=>{let[n,t]=e;return{lat:t,lng:n}});r.push(e)}else"MultiPolygon"===t.type&&t.coordinates.forEach(e=>{let n=e[0].map(e=>{let[n,t]=e;return{lat:t,lng:n}});r.push(n)});let a=new google.maps.Polygon({paths:r,strokeColor:"#057642",strokeWeight:2,fillColor:"#057642",fillOpacity:.2,map:e});return()=>a.setMap(null)},[e]),null},s=e=>{let{mapZoom:n,updateAddress:t}=e,r=(0,o.ko)(),{setGeoEvenMyLocation:i,setGeoEvenPinLocation:s}=(0,a.useContext)(l.F);return(0,a.useEffect)(()=>{if(!r)return;let e=document.createElement("div");return e.innerHTML='<i class="pi pi-map-marker"></i>',Object.assign(e.style,{display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",background:"#fff",border:"2px solid #fff",boxShadow:"0 2px 6px rgba(0,0,0,0.3)",cursor:"pointer",margin:"10px",padding:"9px 9.5px",fontFamily:"Roboto, Arial, sans-serif"}),e.onclick=()=>{if(!navigator.geolocation)return alert("Geolocation not supported.");navigator.geolocation.getCurrentPosition(e=>{let{latitude:a,longitude:l}=e.coords,o={lat:a,lng:l};i(o),s(o),t(a,l),r.panTo(o),r.setZoom(n)})},r.controls[google.maps.ControlPosition.RIGHT_TOP].push(e),()=>{let n=r.controls[google.maps.ControlPosition.RIGHT_TOP],t=n.getArray().indexOf(e);t>=0&&n.removeAt(t)}},[r]),null},c=e=>{let{initialView:n,zoomView:t,updateAddress:r}=e,i=(0,o.ko)(),{setGeoEvenPinLocation:s}=(0,a.useContext)(l.F);return(0,a.useEffect)(()=>{if(!i)return;let e=document.createElement("div");return e.innerHTML='<i class="pi pi-refresh"></i>',Object.assign(e.style,{display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",background:"#fff",color:"#000",border:"2px solid #fff",boxShadow:"0 2px 6px rgba(0,0,0,0.3)",cursor:"pointer",margin:"10px",padding:"9px 9.5px",fontFamily:"Roboto, Arial, sans-serif"}),e.onclick=()=>{i.panTo(n),i.setZoom(t),s(n),r(n.lat,n.lng)},i.controls[google.maps.ControlPosition.TOP_RIGHT].push(e),()=>{let n=i.controls[google.maps.ControlPosition.TOP_RIGHT],t=n.getArray().indexOf(e);t>=0&&n.removeAt(t)}},[i]),null},u=()=>{let{geoEventPinLocation:e,setGeoEvenPinLocation:n,geoEventInitialView:t,geoEventZoomView:u,setGeoEventAddressLocation:d,geoEventMyLocation:p,setGeoEvenMyLocation:m}=(0,a.useContext)(l.F),[f,b]=(0,a.useState)(""),g=(e,n)=>{if(!window.google||!window.google.maps||!window.google.maps.Geocoder)return void setTimeout(()=>g(e,n),100);new window.google.maps.Geocoder().geocode({location:{lat:e,lng:n}},(e,n)=>{"OK"===n&&e[0]?(d(e[0].formatted_address),b(e[0].formatted_address)):(d(null),b(""))})};return(0,a.useEffect)(()=>{e&&"number"==typeof e.lat&&"number"==typeof e.lng&&g(e.lat,e.lng)},[e]),(0,r.jsx)(o.c4,{apiKey:"AIzaSyAb70y0_HMW1Zp07hmz05DMhVW3LhP7gAI",libraries:["drawing"],children:(0,r.jsxs)(o.T5,{style:{width:"100%",height:"300px"},defaultCenter:t,defaultZoom:u,gestureHandling:"greedy",mapId:"abcd1234efgh5678",options:{zoomControl:!0,streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!0,scaleControl:!1,rotateControl:!1,keyboardShortcuts:!1,clickableIcons:!1,scrollwheel:!0,cameraControl:!1},onClick:e=>{if(!(null==e?void 0:e.latLng))return;let t=e.latLng.lat(),r=e.latLng.lng();n({lat:t,lng:r}),m({lat:t,lng:r}),g(t,r)},children:[(0,r.jsx)(i,{}),e&&(0,r.jsx)(o.J8,{position:e,draggable:!0,title:f,onDragEnd:e=>{if(!(null==e?void 0:e.latLng))return;let t=e.latLng.lat(),r=e.latLng.lng();n({lat:t,lng:r}),m({lat:t,lng:r}),g(t,r)}}),(0,r.jsx)(s,{mapZoom:u,updateAddress:g}),(0,r.jsx)(c,{initialView:t,zoomView:u,updateAddress:g})]})})}},3005:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>E});var r=t(5155),a=t(2115),l=t(9603),o=t(4340),i=t(834),s=t(3303),c=t(2510),u=t(71),d=t(1055),p=t(5751),m=t(6029),f=t(2811);function b(){return(b=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function x(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,l,o,i=[],s=!0,c=!1;try{if(l=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=l.call(t)).done)&&(i.push(r.value),i.length!==n);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw a}}return i}}(e,n)||function(e,n){if(e){if("string"==typeof e)return h(e,n);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?h(e,n):void 0}}(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var v=d.x.extend({defaultProps:{__TYPE:"TabMenu",id:null,model:null,activeIndex:0,ariaLabel:null,ariaLabelledBy:null,style:null,className:null,onTabChange:null,children:void 0},css:{classes:{icon:function(e){var n=e._icon;return(0,f.xW)("p-menuitem-icon",n)},label:"p-menuitem-text",action:"p-menuitem-link",menuitem:function(e){var n=e._className,t=e.active,r=e.disabled;return(0,f.xW)("p-tabmenuitem",{"p-highlight":t,"p-disabled":r},n)},inkbar:"p-tabmenu-ink-bar",menu:"p-tabmenu-nav p-reset",root:"p-tabmenu p-component"},styles:"\n@layer primereact {\n    .p-tabmenu {\n        overflow-x: auto;\n    }\n\n    .p-tabmenu-nav {\n        display: flex;\n        margin: 0;\n        padding: 0;\n        list-style-type: none;\n        flex-wrap: nowrap;\n    }\n\n    .p-tabmenu-nav a {\n        cursor: pointer;\n        user-select: none;\n        display: flex;\n        align-items: center;\n        position: relative;\n        text-decoration: none;\n        text-decoration: none;\n        overflow: hidden;\n    }\n\n    .p-tabmenu-nav a:focus {\n        z-index: 1;\n    }\n\n    .p-tabmenu-nav .p-menuitem-text {\n        line-height: 1;\n    }\n\n    .p-tabmenu-ink-bar {\n        display: none;\n        z-index: 1;\n    }\n\n    .p-tabmenu::-webkit-scrollbar {\n        display: none;\n    }\n}\n"}});function y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function j(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?y(Object(t),!0).forEach(function(n){!function(e,n,t){var r;(r=function(e,n){if("object"!=g(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=g(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(n,"string"),(n="symbol"==g(r)?r:r+"")in e)?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t}(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var w=a.memo(a.forwardRef(function(e,n){var t=(0,p.qV)(),r=a.useContext(u.UM),l=v.getProps(e,r),o=x(a.useState(l.id),2),i=o[0],s=o[1],c=x(a.useState(l.activeIndex),2),g=c[0],h=c[1],y=a.useRef(null),w=a.useRef(null),C=a.useRef(null),O=a.useRef({}),E=l.onTabChange?l.activeIndex:g,S={props:l,state:{id:i,activeIndex:E}},k=v.setMetaData(j({},S)),P=k.ptm,N=k.cx,I=k.isUnstyled,T=function(e,n,t){return P(e,{parent:S,context:{item:n,index:t}})};(0,d.j)(v.css.styles,I,{name:"tabmenu"});var D=function(e,n,t){if(n.disabled)return void e.preventDefault();n.command&&n.command({originalEvent:e,item:n}),l.onTabChange?l.onTabChange({originalEvent:e,value:n,index:t}):h(t),n.url||(e.preventDefault(),e.stopPropagation())},L=function(){if(l.model){for(var e=C.current.children,n=!1,t=0;t<e.length;t++){var r=e[t];f.DV.getAttribute(r,"data-p-highlight")&&(w.current.style.width=f.DV.getWidth(r)+"px",w.current.style.left=f.DV.getOffset(r).left-f.DV.getOffset(C.current).left+"px",n=!0)}n||(w.current.style.width="0px",w.current.style.left="0px")}};(0,p.uU)(function(){i||s((0,f._Y)())}),a.useImperativeHandle(n,function(){return{props:l,getElement:function(){return y.current}}}),a.useEffect(function(){L()});var A=function(e,n,t){switch(e.code){case"ArrowRight":V(e.target),e.preventDefault();break;case"ArrowLeft":_(e.target),e.preventDefault();break;case"Home":F(e.target),e.preventDefault();break;case"End":z(e.target),e.preventDefault();break;case"Space":case"Enter":case"NumpadEnter":D(e,n,t),e.preventDefault();break;case"Tab":Z()}},V=function(e){var n=R(e);n&&G(e,n)},_=function(e){var n=M(e);n&&G(e,n)},F=function(e){var n=H();n&&G(e,n)},z=function(e){var n=W();n&&G(e,n)},R=function(e){var n=e.parentElement.nextElementSibling;return n?!0===f.DV.getAttribute(n,"data-p-disabled")?R(n.children[0]):n.children[0]:null},M=function(e){var n=e.parentElement.previousElementSibling;return n?!0===f.DV.getAttribute(n,"data-p-disabled")?M(n.children[0]):n.children[0]:null},H=function(){var e=f.DV.findSingle(C.current,'[data-pc-section="menuitem"][data-p-disabled="false"]');return e?e.children[0]:null},W=function(){var e=f.DV.find(C.current,'[data-pc-section="menuitem"][data-p-disabled="false"]');return e?e[e.length-1].children[0]:null},G=function(e,n){e.tabIndex="-1",n.tabIndex="0",n.focus()},Z=function(){var e=f.DV.findSingle(C.current,'[data-pc-section="menuitem"][data-p-disabled="false"][data-p-highlight="true"]'),n=f.DV.findSingle(C.current,'[data-pc-section="action"][tabindex="0"]');n!==e.children[0]&&(e&&(e.children[0].tabIndex="0"),n.tabIndex="-1")};if(l.model){var U=l.model.map(function(e,n){if(!1===e.visible)return null;var r=e.className,o=e.style,s=e.disabled,c=e.icon,u=e.label,d=e.template,p=e.url,g=e.target,h=e.id||i+"_"+n,x=n===(E||0),v=(0,f.xW)("p-menuitem-icon",c),y=t({className:N("icon",{_icon:c})},T("icon",e,n)),w=f.Hj.getJSXIcon(c,j({},y),{props:l}),C=t({className:N("label")},T("label",e,n)),S=u&&a.createElement("span",C,u),k=t({href:p||"#",role:"menuitem","aria-label":u,tabIndex:x?"0":"-1",className:N("action"),target:g,onClick:function(t){return D(t,e,n)}},T("action",e,n)),P=a.createElement("a",k,w,S,a.createElement(m.n,null));if(d){var I={onClick:function(t){return D(t,e,n)},className:"p-menuitem-link",labelClassName:"p-menuitem-text",iconClassName:v,element:P,props:l,active:x,index:n,disabled:s};P=f.BF.getJSXElement(d,e,I)}var L=t({ref:O.current["tab_".concat(n)],id:h,onKeyDown:function(t){return A(t,e,n)},className:N("menuitem",{_className:r,active:x,disabled:s}),style:o,role:"presentation","data-p-highlight":x,"data-p-disabled":s||!1,"aria-disabled":s},T("menuitem",e,n));return a.createElement("li",b({},L,{key:h}),P)}),B=t({ref:w,role:"none",className:N("inkbar")},P("inkbar")),J=t({ref:C,"aria-label":l.ariaLabel,"aria-labelledby":l.ariaLabelledBy,className:N("menu"),role:"menubar"},P("menu")),K=t({id:l.id,ref:y,className:(0,f.xW)(l.className,N("root")),style:l.style},v.getOtherProps(l),P("root"));return a.createElement("div",K,a.createElement("ul",J,U,a.createElement("li",B)))}return null}));w.displayName="TabMenu";var C=t(7381),O=t(862);let E=a.memo(()=>{var e,n,t,u;let{eventCategory:d,setEventCategory:p,eventLocation:m,setEventLocation:f,eventPriority:b,setEventPriority:g,eventDescription:h,setEventDescription:x,category:v,location:y,priority:j,geoEventPinLocation:E,geoEventAddressLocation:S}=(0,a.useContext)(l.F),[k,P]=(0,a.useState)(0);return(0,r.jsxs)("div",{className:"flex flex-col h-screen p-4 gap-4",children:[(0,r.jsx)(w,{model:[{label:"Mapa",icon:"pi pi-map"},{label:"Evento",icon:"pi pi-pencil"},{label:"Imagens",icon:"pi pi-image"}],activeIndex:k,onTabChange:e=>P(e.index)}),(0,r.jsxs)("div",{className:"flex flex-col flex-1 gap-4 overflow-auto",children:[0===k&&(0,r.jsxs)("div",{className:"flex flex-col gap-3 p-4 border border-gray-300 rounded min-h-[300px]",children:[(0,r.jsxs)(C.V,{children:[(0,r.jsx)(o.S,{id:"endereco",value:S,disabled:!0,placeholder:"Endere\xe7o"}),(0,r.jsx)("label",{htmlFor:"endereco",children:"Endere\xe7o"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(C.V,{children:[(0,r.jsx)(o.S,{id:"latitude",value:null!=(t=null==E||null==(e=E.lat)?void 0:e.toFixed(4))?t:"—",disabled:!0,placeholder:"Latitude"}),(0,r.jsx)("label",{htmlFor:"latitude",children:"Latitude"})]}),(0,r.jsxs)(C.V,{children:[(0,r.jsx)(o.S,{id:"longitude",value:null!=(u=null==E||null==(n=E.lng)?void 0:n.toFixed(4))?u:"—",disabled:!0,placeholder:"Longitude"}),(0,r.jsx)("label",{htmlFor:"longitude",children:"Longitude"})]})]}),(0,r.jsx)("div",{className:"flex-1 min-h-[300px]",children:(0,r.jsx)(O.A,{className:"w-full h-full"})})]}),1===k&&(0,r.jsxs)("div",{className:"flex flex-col gap-3 p-4 border border-gray-300 rounded",children:[(0,r.jsxs)(C.V,{children:[(0,r.jsx)(i.m,{inputId:"categoria",value:d,onChange:e=>p(e.value),options:v,optionLabel:"label",showClear:!0,appendTo:()=>document.body,placeholder:"Categoria"}),(0,r.jsx)("label",{htmlFor:"categoria",children:"Categoria"})]}),(0,r.jsxs)(C.V,{children:[(0,r.jsx)(i.m,{inputId:"localizacao",value:m,onChange:e=>f(e.value),options:y,optionLabel:"label",showClear:!0,filter:!0,appendTo:()=>document.body,placeholder:"Localiza\xe7\xe3o"}),(0,r.jsx)("label",{htmlFor:"localizacao",children:"Localiza\xe7\xe3o"})]}),(0,r.jsxs)(C.V,{children:[(0,r.jsx)(i.m,{inputId:"prioridade",value:b,onChange:e=>g(e.value),options:j,optionLabel:"label",showClear:!0,appendTo:()=>document.body,placeholder:"Prioridade"}),(0,r.jsx)("label",{htmlFor:"prioridade",children:"Prioridade"})]}),(0,r.jsxs)(C.V,{children:[(0,r.jsx)(s.Z,{id:"descricao",autoResize:!0,value:h,onChange:e=>x(e.target.value),rows:4,placeholder:"Descri\xe7\xe3o"}),(0,r.jsx)("label",{htmlFor:"descricao",children:"Descri\xe7\xe3o"})]})]}),2===k&&(0,r.jsx)("div",{className:"flex flex-col min-h-[300px] p-4 border border-gray-300 rounded",children:(0,r.jsx)(c.e,{name:"images[]",url:"/api/upload",multiple:!0,accept:"image/*",chooseLabel:"Imagens",uploadLabel:"Upload",cancelLabel:"Cancelar",maxFileSize:1e6,className:"w-full",emptyTemplate:(0,r.jsx)("p",{className:"m-0",children:"Arraste imagens aqui"})})})]})]})})},3188:(e,n,t)=>{Promise.resolve().then(t.bind(t,3005))}},e=>{e.O(0,[31,911,491,603,441,255,358],()=>e(e.s=3188)),_N_E=e.O()}]);